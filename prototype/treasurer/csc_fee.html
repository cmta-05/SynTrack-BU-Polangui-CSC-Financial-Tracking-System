<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>CSC Fee Management - Treasurer</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet" />
    <link rel="stylesheet" href="../assets/css/style.css" />
  </head>

  <body onload="initPage('treasurer-csc-fee')" class="theme-dark">
    <div class="app-shell">
      <!-- Sidebar -->
      <aside class="sidebar bg-dark text-white p-3" id="sidebar" style="width:260px; min-height:100vh; transition:0.3s; overflow:hidden;">
        <button class="btn btn-sm btn-outline-light mb-3" onclick="toggleSidebar()">‚â°</button>

        <h4 class="fw-bold mb-4 text-center sidebar-label">CSC Treasurer</h4>

        <ul class="nav flex-column gap-1">
          <li><a class="nav-link text-white d-flex align-items-center" href="treasurer_dashboard.html">üìä <span class="ms-2 sidebar-label">Dashboard</span></a></li>
          <li><a class="nav-link active text-primary fw-bold d-flex align-items-center" href="csc_fee.html">üí∞ <span class="ms-2 sidebar-label">CSC Fee</span></a></li>
          <li><a class="nav-link text-white d-flex align-items-center" href="dispute_management.html">‚ö†Ô∏è <span class="ms-2 sidebar-label">Disputes</span></a></li>
          <li><a class="nav-link text-white d-flex align-items-center" href="treasurer_reports.html">üìë <span class="ms-2 sidebar-label">Reports</span></a></li>
          <li><a class="nav-link text-white d-flex align-items-center" href="#auditLog">üìò <span class="ms-2 sidebar-label">Audit Log</span></a></li>
          <li><a class="nav-link text-white d-flex align-items-center" href="#academicYears">üìÖ <span class="ms-2 sidebar-label">Academic Years</span></a></li>
        </ul>

        <div class="mt-auto pt-4 text-center">
          <a class="btn btn-outline-light btn-sm w-100 sidebar-label" href="../login.html">Logout</a>
        </div>
      </aside>

      <!-- Workspace -->
      <div class="workspace">
        <header class="topbar">
          <div>
            <div class="topbar-title">Bicol University Polangui - College Student Council PayTrack</div>
            <small id="currentDateTime" class="text-muted"></small>
          </div>
          <div class="topbar-actions">
            <button type="button" class="icon-btn theme-toggle-btn" onclick="toggleTheme()" aria-label="Toggle dark mode">üåì</button>
            <div class="notification-menu">
              <button type="button" class="icon-btn" onclick="toggleNotifications()" aria-label="Notifications">üîî</button>
            </div>
            <div class="user-menu">
              <div class="user-avatar" onclick="toggleUserMenu()" role="button">VR</div>
              <div id="userDropdown" class="user-dropdown">
                <div class="user-dropdown-header">
                  <strong>VANNESA ROSE B.</strong>
                  <div class="small text-muted">BSIT | 3rd Year</div>
                </div>
                <a href="#">Profile</a>
                <a href="#">Manage Password</a>
                <a href="#">Contact Admin</a>
                <a href="../login.html" class="sign-out">Sign Out</a>
              </div>
            </div>
          </div>
        </header>

        <div class="page-content">
          <section class="dashboard-hero mb-4">
            <div class="row align-items-center">
              <div class="col-md-12">
                <h2 class="mb-1">CSC Fee Management</h2>
                <p class="hero-subtitle mb-0">Verify payments fast, track statuses, and keep records clean.</p>
              </div>
            </div>
          </section>

          <!-- Overview cards -->
          <div class="row g-3 mb-4 align-items-stretch d-flex">
            <div class="col-md-6 col-lg-3">
              <div class="card p-3 shadow-sm dashboard-card border-left-success h-100">
                <div class="d-flex justify-content-between align-items-start">
                  <div>
                    <h5 id="cscTotalVerified" class="text-success fw-bold mb-1">0</h5>
                    <p class="text-muted mb-0 small">Total Verified Payments</p>
                  </div>
                  <span class="badge bg-success"><i class="bi bi-check2-circle"></i></span>
                </div>
              </div>
            </div>
            <div class="col-md-6 col-lg-3">
              <div class="card p-3 shadow-sm dashboard-card border-left-warning h-100">
                <div class="d-flex justify-content-between align-items-start">
                  <div>
                    <h5 id="cscTotalPending" class="text-warning fw-bold mb-1">0</h5>
                    <p class="text-muted mb-0 small">Total Pending Verifications</p>
                  </div>
                  <span class="badge bg-warning text-dark"><i class="bi bi-hourglass-split"></i></span>
                </div>
              </div>
            </div>
            <div class="col-md-6 col-lg-3">
              <div class="card p-3 shadow-sm dashboard-card border-left-primary h-100">
                <div class="d-flex justify-content-between align-items-start">
                  <div>
                    <h5 id="cscTotalCollected" class="text-primary fw-bold mb-1">‚Ç±0.00</h5>
                    <p class="text-muted mb-0 small">Total Amount Collected</p>
                  </div>
                  <span class="badge bg-primary"><i class="bi bi-cash-stack"></i></span>
                </div>
              </div>
            </div>
            <div class="col-md-6 col-lg-3">
              <div class="card p-3 shadow-sm dashboard-card border-left-info h-100">
                <div class="d-flex justify-content-between align-items-start">
                  <div>
                    <h5 id="cscStudentsNotPaid" class="text-info fw-bold mb-1">0</h5>
                    <p class="text-muted mb-0 small">Students Not Yet Paid</p>
                  </div>
                  <span class="badge bg-info"><i class="bi bi-people"></i></span>
                </div>
              </div>
            </div>
          </div>

          <!-- Filters -->
          <div class="card mb-4">
            <div class="card-header d-flex flex-wrap gap-3 align-items-center">
              <span class="fw-semibold">Search & Filters</span>
              <div class="ms-auto small text-muted">Actions here are logged to the Audit Trail (dashboard).</div>
            </div>
          <div class="card-body row g-3">
            <div class="col-12 col-lg-3">
              <label class="form-label small text-muted">Search name or ID</label>
              <input class="form-control" id="cscSearchInput" placeholder="e.g. Maria or 2025-" />
            </div>
            <div class="col-6 col-lg-3">
              <label class="form-label small text-muted">Filter by block</label>
              <select class="form-select" id="cscBlockFilter">
                <option value="">All Blocks</option>
              </select>
            </div>
            <div class="col-6 col-lg-3">
              <label class="form-label small text-muted">Filter by course</label>
              <select class="form-select" id="cscCourseFilter">
                <option value="">All Courses</option>
              </select>
            </div>
            <div class="col-6 col-lg-3">
              <label class="form-label small text-muted">Filter by status</label>
              <select class="form-select" id="cscStatusFilter">
                <option value="">All</option>
                <option value="Pending">Pending</option>
                <option value="Verified">Paid</option>
                <option value="Unpaid">Not Paid</option>
                <option value="Rejected">Rejected</option>
              </select>
            </div>
          </div>
          </div>

          <!-- Pending verification table -->
          <div class="card mb-4">
            <div class="card-header d-flex justify-content-between align-items-center">
              <span class="fw-semibold">Pending Payment Verifications</span>
              <span id="pendingCountBadge" class="badge bg-warning text-dark">0</span>
            </div>
            <div class="card-body table-wrapper">
              <div class="table-responsive">
                <table class="table table-striped table-hover align-middle mb-0">
                  <thead class="table-warning">
                    <tr>
                      <th>Student Name</th>
                      <th>Student ID</th>
                      <th>Block</th>
                      <th class="d-none d-md-table-cell">Course</th>
                      <th>Amount</th>
                      <th>Reference #</th>
                      <th>Date Submitted</th>
                      <th>Proof</th>
                      <th class="text-end">Actions</th>
                    </tr>
                  </thead>
                  <tbody id="pendingPaymentsTable">
                    <tr><td colspan="8" class="text-center text-muted py-3">No pending submissions</td></tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>

          <!-- Student payment status table -->
          <div class="card mb-4">
            <div class="card-header fw-semibold d-flex justify-content-between align-items-center">
              <span>Student Payment Status</span>
              <span class="small text-muted">Live view of all students and statuses</span>
            </div>
            <div class="card-body table-wrapper">
              <div class="table-responsive">
                <table class="table table-striped table-hover align-middle mb-0">
                  <thead class="table-light">
                    <tr>
                      <th>Student Name</th>
                      <th>Student ID</th>
                      <th>Block</th>
                      <th class="d-none d-lg-table-cell">Course</th>
                      <th>Status</th>
                      <th>Date Verified</th>
                      <th>Verified By</th>
                    </tr>
                  </thead>
                  <tbody id="studentStatusTable">
                    <tr><td colspan="7" class="text-center text-muted py-3">No records found</td></tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>

        <footer class="app-footer">
          <div class="d-flex justify-content-between flex-wrap gap-2">
            <span>CSC PayTrack ¬∑ Bicol University Polangui - College Student Council</span>
            <span class="meta-text">Prototype UI ¬∑ For academic purposes only</span>
          </div>
        </footer>
      </div>
    </div>

    <!-- Payment detail modal -->
    <div class="modal fade" id="paymentModal" tabindex="-1" aria-labelledby="paymentModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="paymentModalLabel">Payment Submission Details</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <div class="row g-3">
              <div class="col-md-6">
                <div class="mb-2"><strong>Student Name:</strong> <span id="modalStudentName"></span></div>
                <div class="mb-2"><strong>Student ID:</strong> <span id="modalStudentId"></span></div>
                <div class="mb-2"><strong>Block:</strong> <span id="modalStudentBlock"></span></div>
                <div class="mb-2"><strong>Amount Submitted:</strong> ‚Ç±<span id="modalAmount"></span></div>
                <div class="mb-2"><strong>Date Submitted:</strong> <span id="modalDate"></span></div>
                <div class="mb-2"><strong>Reference #:</strong> <span id="modalReference"></span></div>
              </div>
              <div class="col-md-6">
                <div class="ratio ratio-4x3 border rounded">
                  <img id="modalProofImage" src="" alt="Proof of payment" class="img-fluid rounded" style="object-fit:contain;">
                </div>
                <small class="text-muted d-block mt-2">Click image to open in new tab</small>
              </div>
            </div>
          </div>
          <div class="modal-footer d-flex justify-content-between">
            <div class="text-muted small">Viewing and actions are logged to Audit Trail.</div>
            <div class="d-flex gap-2">
              <button type="button" class="btn btn-outline-danger" id="modalRejectBtn">Reject</button>
              <button type="button" class="btn btn-success" id="modalVerifyBtn">Verify</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../assets/js/data.js"></script>
    <script src="../assets/js/forms.js"></script>
    <script src="../assets/js/main.js"></script>
  </body>
</html>